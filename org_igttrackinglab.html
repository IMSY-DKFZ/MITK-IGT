<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MITK-IGT: IGT Tutorial Step 5: The IGT-TrackingLab</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MITK-IGT
   </div>
   <div id="projectbrief">IGT Extension of MITK</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('org_igttrackinglab.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">IGT Tutorial Step 5: The IGT-TrackingLab</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Available sections:</p><ul>
<li><a class="el" href="#QmitkIGTTrackingLabUsersManualOverview">Introduction</a></li>
<li><a class="el" href="#QmitkIGTTrackingLabUsersManualPrel">Preliminaries</a></li>
<li><a class="el" href="#QmitkIGTTrackingLabUsersManualConf">Configuration</a></li>
<li><a class="el" href="#QmitkIGTTrackingLabUsersManualIntialReg">Initial Registration</a></li>
<li><a class="el" href="#QmitkIGTTrackingLabUsersManualPermReg">Permanent Registration</a></li>
<li><a class="el" href="#QmitkIGTTrackingLabUsersManualPtSetRec">PointSet Recording</a></li>
<li><a class="el" href="#QmitkIGTTrackingLabUsersManualCamView">Camera View</a></li>
</ul>
<h1><a class="anchor" id="QmitkIGTTrackingLabUsersManualOverview"></a>
Introduction</h1>
<p>The IGT-TrackingLab is the last step of the IGT tutorial. In the following you can learn how to use the plugin by reading this manual. IGT-TrackingLab shows example usage for many IGT classes and is also an example navigation implemented with IGT.</p>
<p>The symbol of the Tracking Lab View is the following:</p>
<div class="image">
<img src="icon_igt_tracking_lab.png" alt=""/>
</div>
<p> <br  />
 </p>
<p>The view looks like this: </p><div class="image">
<img src="IGT_TrackingLab_PluginView.png" alt=""/>
</div>
<p> <br  />
 </p>
<p>With this tutorial you will register a book using a tracking device of your choice and the MITK's book surface file. The registration will enable you to move the book in the real world and observe its movement in the MITK display. It also allows you to record PointSets or use the CameraView which simulates a Camera at the tip of your pointer.</p>
<h1><a class="anchor" id="QmitkIGTTrackingLabUsersManualPrel"></a>
Preliminaries</h1>
<p>First connect your tracking device to your PC. Then start the MITK Workbench and configure your tracking device using the <a class="el" href="org_mitk_views_igttrackingtoolbox.html">Tracking Toolbox View</a>.</p>
<h1><a class="anchor" id="QmitkIGTTrackingLabUsersManualConf"></a>
Configuration</h1>
<p>Select the desired <em>Navigation Data Source</em>. Now it's time to define which tool shall be used as object marker and which tool shall be used as pointer. Next load the Book surface provided with the example data (e.g. book.stl from the MITK-Data repository which comes with every superbuild or may also be checked out separately) into MITK. Fixate the object marker on a real book of your choice. Now we need to tell MITK that the object marker has been fixated on a physical object. To do this, select the <em>Book</em> as surface in the <em><a class="el" href="structObject.html">Object</a> Selection</em> submenu as you can see in the screenshot above.</p>
<h1><a class="anchor" id="QmitkIGTTrackingLabUsersManualIntialReg"></a>
Initial Registration</h1>
<p>Now we need to register the object marker to the surface it's fixed upon, in our case the book. To do this, first press the initial registration button. For MITK to be able to do this registration, we need to</p><ol type="1">
<li>Select landmarks on the virtual object (e.g. the corners of the book) Press the <em>plus</em> button in the <em>Image fiducials</em> column. Shift + click on the corners on the book in the <em>MITK Display</em>.</li>
<li>Point to the corresponding landmarks in the real world using the pointer. Now press the <em>plus</em> button in the <em>Real world fiducials</em> column and point to the corners on the real book. Press <em>Add current instrument position</em> whenever you targeted a corner to tell MITK this is the desired landmark. Make sure you select the "real" edges in the same order as the edges in the image. <div class="image">
<img src="IGT_TrackingLab_InitialRegistration.PNG" alt=""/>
<div class="caption">
Here the landmarks of the virtual object are already set</div></div>
 <br  />
 </li>
</ol>
<p>Press <em>Register</em> to finalize the initial registration. Now the object marker is registered onto the book. You can see this in the MITK image. If needed the FRE is shown in the widget.</p>
<h1><a class="anchor" id="QmitkIGTTrackingLabUsersManualPermReg"></a>
Permanent Registration</h1>
<p>Now everything is set up and registered. We can thus activate permanent registration to continuously track the object, the object marker and the pointer.</p>
<p>For this, simply press the <em>Permanent Registration</em> button and select <em>Activate permanent registration</em>. You can now move the book in the real world and see the same movement in the <em>MITK Display</em>. <a class="el" href="classA.html">A</a> nice test to see if everything was correctly registered is to target the corners of the book with the pointer and check if the correct corners are pointed to in the <em>MITK Display</em>.</p>
<h1><a class="anchor" id="QmitkIGTTrackingLabUsersManualPtSetRec"></a>
PointSet Recording</h1>
<p><a class="el" href="classA.html">A</a> user might now want to track a tool's trajectory. For this, the <em>PointSet Recording</em> was created.</p>
<p>First click on <em>PointSet Recording</em>. Now select your tracking source and the tool whose trajectory shall be recorded. Activate the <em>Point Set Recording</em> checkbox. In the <em>MITK Display</em> little green points will now be drawn for every measured position. Deactivate the checkbox to stop recording. The trajectory is saved in the PointSet <em>Recorded Points</em> visible in the Data Manager.</p>
<h1><a class="anchor" id="QmitkIGTTrackingLabUsersManualCamView"></a>
Camera View</h1>
<p>Another possible tracking application is the Camera View. Here, a virtual camera is placed at the pointers tip and its images are shown in the MITK Display.</p>
<p>Select Camera View and as usual the Tracking Source and the tool you want to place the virtual camera on. Activate the "Activate Needle View" checkbox and move the pointer around the book. You can now see the book from the pointers perspective.</p>
<p>You may need to adjust the Needle View Direction and the View Up Vector. This is always relative to your tools coordinate center origin. An example of the NDI pointer tool coordinate system is shown below:</p>
<div class="image">
<img src="QmitkIGTExamples_Tool.png" alt=""/>
<div class="caption">
The coordinate system of the NDI pointing tool</div></div>
<p> <br  />
 </p>
<p>In the above case, the camera should look in inverse z-direction, and the view up vector should probably be set to positive x. Note this is just an example and may be different depending on your pointer.</p>
<p>Return to the <a class="el" href="IGTTutorialOverview.html">[IGT Tutorial Overview]</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="mitkigt.html">MITK-IGT</a></li><li class="navelem"><a class="el" href="org_mitk_gui_qt_igtexample.html">The IGT Examples</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
