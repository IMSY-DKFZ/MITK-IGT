<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MITK-IGT: How To Implement A Tracking Device</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MITK-IGT
   </div>
   <div id="projectbrief">IGT Extension of MITK</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('IGTHowToImplementATrackingDevice.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">How To Implement A Tracking Device</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>If you want to implement your own Tracking device, you need to do the following (see e.g. <a class="el" href="classmitk_1_1VirtualTrackerTypeInformation.html" title="Type information for a virtual tracker.">mitk::VirtualTrackerTypeInformation</a>):</p>
<ol type="1">
<li>Derive a class MyAwesomeTrackingDeviceInformation from the abstract class <a class="el" href="classmitk_1_1TrackingDeviceTypeInformation.html" title="Abstract class containing.">mitk::TrackingDeviceTypeInformation</a></li>
<li>In the constructor of your class<ol type="a">
<li>give your device a unique name ("my awesome device")</li>
<li>push back at least one <a class="el" href="structmitk_1_1TrackingDeviceData.html">mitk::TrackingDeviceData</a> corresponding to your device to m_TrackingDeviceData (<a class="el" href="namespacemitk.html#ad054ea0a8307395eb3511f5ab03d06e8">mitk::TrackingDeviceType</a> member 'Line' needs to be identical to your chosen device name "my awesome device")</li>
</ol>
</li>
<li>Implement the method <a class="el" href="classmitk_1_1TrackingDeviceTypeInformation.html#aec6585ca422d880412aaf3b90bc6cde9">mitk::TrackingDeviceTypeInformation::CreateTrackingDeviceSource</a>.</li>
</ol>
<p>Recommended steps (but not necessary):</p><ol type="1">
<li><p class="startli">Provide a static method to get your tracking device name.<br  />
 Recommended: </p><div class="fragment"><div class="line"><span class="keyword">static</span> std::string MyAwesomeTrackingDeviceInformation::GetTrackingDeviceName()</div>
<div class="line">{</div>
<div class="line">   <span class="keywordflow">return</span> <span class="stringliteral">&quot;my awesome device&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><p> Use this method in your constructor for step 2a) and 2b).</p>
<p class="startli">This method will make it easier to implement options for your device in any other Module/Plugin. If you want to check if the device in use is your device, you need to compare the names - and this can now be done in any Plugin just by calling this static method. And if you later on decide to change the name of your device into "my One And Only Device" - there is only one line of code you'll have to adapt.<br  />
 Attention: If you change the name, you must edit all tool storages which were saved, e.g. using <a class="el" href="org_mitk_views_igtnavigationtoolmanager.html">The MITK-IGT Navigation Tool Manager</a> .<br  />
 Attention: You should use a static method instead of static variables due to the initialization order of static variables and the autoload module.</p>
</li>
<li>Provide static methods for all your <a class="el" href="structmitk_1_1TrackingDeviceData.html">mitk::TrackingDeviceData</a>.<br  />
 Recommended: <div class="fragment"><div class="line">TrackingDeviceData MyAwesomeTrackingDeviceInformation::GetDeviceDataForMyFirstDevice()</div>
<div class="line">{</div>
<div class="line">              <span class="keywordflow">return</span>{ MyAwesomeTrackingDeviceInformation::GetTrackingDeviceName(), <span class="stringliteral">&quot;my Model&quot;</span>, <span class="stringliteral">&quot;my model volume location&quot;</span>, <span class="stringliteral">&quot;my hardware code&quot;</span> };</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li><p class="startli">Register your Tracking Device to the collection: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;usGetModuleContext.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;usModule.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;usServiceProperties.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;usModuleContext.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="classmitk_1_1TrackingDeviceTypeCollection.html">mitk::TrackingDeviceTypeCollection</a>* m_DeviceTypeCollection;</div>
<div class="line">us::ModuleContext* context = us::GetModuleContext();</div>
<div class="line">std::vector&lt;us::ServiceReference&lt;mitk::TrackingDeviceTypeCollection&gt; &gt; refs = context-&gt;GetServiceReferences&lt;<a class="code hl_class" href="classmitk_1_1TrackingDeviceTypeCollection.html">mitk::TrackingDeviceTypeCollection</a>&gt;();</div>
<div class="line"><span class="keywordflow">if</span> (refs.empty())</div>
<div class="line">{</div>
<div class="line">  MITK_ERROR &lt;&lt; <span class="stringliteral">&quot;No tracking device service found!&quot;</span>;</div>
<div class="line">}</div>
<div class="line">m_DeviceTypeCollection = context-&gt;GetService&lt;<a class="code hl_class" href="classmitk_1_1TrackingDeviceTypeCollection.html">mitk::TrackingDeviceTypeCollection</a>&gt;(refs.front());</div>
<div class="line">m_DeviceTypeCollection-&gt;<a class="code hl_function" href="classmitk_1_1TrackingDeviceTypeCollection.html#a5a21903ae12f4c33aef8887cc20efeec">RegisterTrackingDeviceType</a>(<span class="keyword">new</span> mitk::MyAwesomeTrackingDeviceInformation());</div>
<div class="ttc" id="aclassmitk_1_1TrackingDeviceTypeCollection_html"><div class="ttname"><a href="classmitk_1_1TrackingDeviceTypeCollection.html">mitk::TrackingDeviceTypeCollection</a></div><div class="ttdoc">This class is a collection for information of all Tracking Device Types (derived from abstract Tracki...</div><div class="ttdef"><b>Definition</b> <a href="mitkTrackingDeviceTypeCollection_8h_source.html#l00035">mitkTrackingDeviceTypeCollection.h:36</a></div></div>
<div class="ttc" id="aclassmitk_1_1TrackingDeviceTypeCollection_html_a5a21903ae12f4c33aef8887cc20efeec"><div class="ttname"><a href="classmitk_1_1TrackingDeviceTypeCollection.html#a5a21903ae12f4c33aef8887cc20efeec">mitk::TrackingDeviceTypeCollection::RegisterTrackingDeviceType</a></div><div class="ttdeci">void RegisterTrackingDeviceType(TrackingDeviceTypeInformation *typeInformation)</div><div class="ttdef"><b>Definition</b> <a href="mitkTrackingDeviceTypeCollection_8cpp_source.html#l00053">mitkTrackingDeviceTypeCollection.cpp:53</a></div></div>
</div><!-- fragment --><p class="startli">You can do the registration anywhere in your code, also from external projects. We recommend doing the registration of your tracking device in the autoload function of your module. Devices, which should be always available (e.g. Polaris, Aurora, Virtual, ...) are registered in <a class="el" href="classmitk_1_1IGTActivator.html" title="The load function of this class is executed every time, the module is loaded. Attention: no static va...">mitk::IGTActivator</a>.</p>
</li>
<li>Implement a widget to configure your device and register it to the collection<ol type="a">
<li>Derive a Widget class QmitkMyAwesomeTrackingDeviceWidget from <a class="el" href="classQmitkAbstractTrackingDeviceWidget.html" title="Abstract class to configure a tracking device. Inherited widgets should be registered in the Microser...">QmitkAbstractTrackingDeviceWidget</a>. Please follow the steps as explained in <a class="el" href="QmitkAbstractTrackingDeviceWidget_8h.html">QmitkAbstractTrackingDeviceWidget.h</a></li>
<li>Create a .ui file</li>
<li>Register it to <a class="el" href="classmitk_1_1TrackingDeviceWidgetCollection.html" title="This class is a collection for all TrackingDeviceWidgets (derived from AbstractTrackingDeviceWidget) ...">mitk::TrackingDeviceWidgetCollection</a> <div class="fragment"><div class="line">m_DeviceWidgetCollection.RegisterTrackingDeviceWidget(mitk::MyAwesomeTrackingDeviceInformation::GetTrackingDeviceName(), <span class="keyword">new</span> QmitkMyAwesomeTrackingDeviceWidget);</div>
</div><!-- fragment --> You can get the Widget collection analogous to step 3, replacing <a class="el" href="classmitk_1_1TrackingDeviceTypeCollection.html" title="This class is a collection for information of all Tracking Device Types (derived from abstract Tracki...">mitk::TrackingDeviceTypeCollection</a> with <a class="el" href="classmitk_1_1TrackingDeviceWidgetCollection.html" title="This class is a collection for all TrackingDeviceWidgets (derived from AbstractTrackingDeviceWidget) ...">mitk::TrackingDeviceWidgetCollection</a>.</li>
</ol>
</li>
</ol>
<p>Your tracking device should now be available in other Plugins, e.g. <a class="el" href="org_mitk_views_igttrackingtoolbox.html">The MITK-IGT Tracking Toolbox</a> . </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="mitkigt.html">MITK-IGT</a></li><li class="navelem"><a class="el" href="IGTTutorialOverview.html">IGT Tutorial Overview</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
