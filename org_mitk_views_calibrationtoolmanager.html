<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MITK-IGT: The MITK-IGT Navigation Tool Calibration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MITK-IGT
   </div>
   <div id="projectbrief">IGT Extension of MITK</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('org_mitk_views_calibrationtoolmanager.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">The MITK-IGT Navigation Tool Calibration</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#QmitkMITKIGTNavigationToolCalibrationIntroduction">Introduction</a>
  </li>
  <li class="level1">
    <a href="#QmitkMITKIGTNavigationToolCalibrationPrerequisities">Prerequisites</a>
  </li>
  <li class="level1">
    <a href="#QmitkMITKIGTNavigationToolCalibrationInitialization">Initialization</a>
  </li>
  <li class="level1">
    <a href="#QmitkMITKIGTNavigationToolCalibrationToolTipCalibration">Tool Tip Calibration</a>
    <ul>
      <li class="level2">
        <a href="#QmitkMITKIGTNavigationToolCalibrationManual">Manual Tool Tip Calibration</a>
      </li>
      <li class="level2">
        <a href="#QmitkMITKIGTNavigationToolCalibrationReference">Tool Tip Calibration with a single Reference Tool</a>
      </li>
      <li class="level2">
        <a href="#QmitkMITKIGTNavigationToolCalibrationPivot">Tool Tip Calibration via Pivoting</a>
      </li>
      <li class="level2">
        <a href="#QmitkMITKIGTNavigationToolCalibration">Tool Landmark Calibration</a>
      </li>
    </ul>
  </li>
</ul>
</div>
<div class="textblock"><div class="image">
<img src="iconTrackingToolCalibration.png" alt=""/>
<div class="caption">
Icon of the MITK-IGT Tracking Toolbox</div></div>
<p> <br  />
 </p>
<h1><a class="anchor" id="QmitkMITKIGTNavigationToolCalibrationIntroduction"></a>
Introduction</h1>
<p>This view allows the calibration of navigation tools. The calibrated tools can be saved permanently and later be used for any other IGT application. The following coordinate transforms are associated with tracking of a tool: </p><ul>
<li>
The sensor transformation from the global tracking coordinate system to the local coordinate system of the tracked sensor (m_Position, m_Orientation). </li>
<li>
The tool tip transformation from the local sensor coordinate system to a tool tip coordinate system defined by a tool tip position and a main tool axis (m_ToolTipPosition, m_ToolAxisOrientation). The tool axis is defined as the negative z-axis of the tool tip coordinate system. </li>
<li>
The main axis of the representation object of the tool (e.g. a surface) has to be defined along the negative z-axis. </li>
</ul>
<div class="image">
<img src="TrackingTool.png" alt=""/>
<div class="caption">
Coordinate transforms associated to the tracking tool.</div></div>
<p> <br  />
 </p>
<h1><a class="anchor" id="QmitkMITKIGTNavigationToolCalibrationPrerequisities"></a>
Prerequisites</h1>
<p>In the IGT Tracking Toolbox configure your tracking device with at least two tools. The tool you wish to calibrate and one tool used as a pointer during the calibration process. For details on how to configure your tracking device and your tools have a look at <a class="el" href="org_mitk_views_igttrackingtoolbox.html">The MITK-IGT Tracking Toolbox</a> . After you configured your device and your tools connect your device and start tracking. Now switch to the IGT Navigation Tool Calibration for the calibration process.</p>
<h1><a class="anchor" id="QmitkMITKIGTNavigationToolCalibrationInitialization"></a>
Initialization</h1>
<p>On the tab Initialization choose the tracking device you configured in the prevois step by clicking on it in the box "Available Navigation Data Sources". Then in the box "Tools" the tools you configured for this device should appear. Click on the tool that needs to be calibrated and then on the button "Use as Tool to Calibrate". On top of the view under the headline "Tool To calibrate" you now see the tool information for the chosen tool. For the tool used as a pointer do the same. Click on it, then click on the button "Use as Calibration Pointer" and on top of the view under the headline "Calibration pointer you should see the tool information for the pointer tool.

@image html QmitkIGTTracking_ToolCalibration_Initialization.png "MITK Screenshot with the initialized tools for calibration" \n @image latex QmitkIGTTracking_ToolCalibration_Initialization.png "MITK Screenshot with the initialized tools for calibration" width=5.00cm


@section QmitkMITKIGTNavigationToolCalibrationToolTipCalibration Tool Tip Calibration

After you finished the initialization of your tracking device you can proceed on to the tab Tool Tip Calibration to calibrate your tool.
For the Tool Tip Calibration you have four different options:

&lt;ul&gt;
&lt;li&gt; Manual: Enter the known Translation and Rotation for the Tool Tip manually
&lt;li&gt; Single Reference Tool: Use a calibrated tool as a reference to calibrate the non-calibrated tool
&lt;li&gt; Multiple Tools Reference: Not implemented yet
&lt;li&gt; Pivoting: Calibrate the tool by pivoting it around its tip. (Not fully implemented yet)
&lt;/ul&gt;

@subsection QmitkMITKIGTNavigationToolCalibrationManual Manual Tool Tip Calibration

Use this method to calibrate a navigation tool, of which you already know the translation and rotation that determine the tool tip calibration.
Click on Start Edit Tooltip and in the new window you can enter the values for the translation and the rotation. Either by using the sliders or by entering the values into the boxes.
@image html QmitkIGTTracking_ToolCalibration_Manual_EditingWindow.png "MITK Screenshot of the window for manual tool calibration" \n @image latex QmitkIGTTracking_ToolCalibration_Manual_EditingWindow.png "MITK Screenshot of the window for manual tool calibration" width=5.00cm
After you entered the values you can click "Use Manipulated ToolTip" to perform the Calibration on the Tool to calibrate. The box "Current Tool Tip Orientation" will show you the results. It will list the resulting values of the Quaternion, the Euler Angles and the Matrix.
@image html QmitkIGTTracking_ToolCalibration_Manual_After.png "MITK Screenshot of the Current Tool Tip Orientation Box after the tool was manually calibrated" \n @image latex QmitkIGTTracking_ToolCalibration_Manual_After.png "MITK Screenshot of the Current Tool Tip Orientation Box after the tool was manually calibrated" width=5.00cm
To save the result permanently just click "Save Calibrated Navigation Tool" and you can save the calibrated tool as an IGTTool for later use with your tracking device in a navigation application.
If you are not satisfied with the results you can click "Start Edit Tooltip" again and either change the values for the rotation and translation again or just reset everything by clicking on "Reset to Identity". To write the new values or resetted values into the tool just click "Use Manipulated Tool Tip" again. Now you can save your relust just as described above.

@subsection QmitkMITKIGTNavigationToolCalibrationReference Tool Tip Calibration with a single Reference Tool

Use this method to calibrate a navigation tool using a tool as pointer that is already calibrated.
First choose the number of tracking data you wish to collect. It is 100 by default but you may choose as many as you wish. Now place your tool to calibrate in a fixed position where it is tracked. Next place your pointing tool in a manner that its tip touches the tip and is tracked too. Fix it in this position. For a good calibration it is important that the tools move the least possible.
After you placed the tools click on the "Collect Navigation Data" Button and wait until all the data is gathered. Now you have several options to adjust the calibration to your needs. You can calibrate the position and/or the orientation or even invert the calibration transform. Calibrating the position will translate the position of the tool to calibrate to the position of the calibration pointer. The orientation calibration will copy the mean orientation of the calibration pointer to the tool the calibrate. Choose the options needed for your tool and tracker and then click on "Run Calibration".
The new Tool Tip Position and Orientation will be displayed und you can now apply them onto your tool by clicking on "Set New Tool Tip Position and/or Tool Orientation". To finally save the calibrated tool for later use just click on "Save Calibrated Navigation Tool".
If you are not satisfied with the result of the calibration just repeat the steps described above.

@image html QmitkIGTTracking_ToolCalibration_Reference.png "MITK Screenshot of the Tool Tip Calibration Widget after a fully performed Tool Calibration using a single reference tool " \n @image latex QmitkIGTTracking_ToolCalibration_Reference.png "MITK Screenshot of the Tool Tip Calibration Widget after a fully performed Tool Calibration using a single reference tool " width=5.00cm

@subsection QmitkMITKIGTNavigationToolCalibrationPivot Tool Tip Calibration via Pivoting

To calibrate your tool via pivoting place it on its tip an pivot it around its tip. Be careful not to move the tip otherwise the calibration result will be inaccurate. You can define the number of poses that should be collected. After starting the collecting process pivote the tool to different poses until the collection ends. Then click on "Compute Pivot Point" to compute the pivot point. Finally you can use the pivot result as tooltip transformation and save the calibrated tool to the hard disc for later use.

@subsection QmitkMITKIGTNavigationToolCalibration Tool Landmark Calibration

Two types of landmarks can be defined for each tool:
&lt;ul&gt;
&lt;li&gt; Control points for a later point-based registration
&lt;li&gt; Tool landmarks that represents features on the tool which are e.g. visible in a CT image
&lt;/ul&gt;

Both sets of landmarks are defined in the tool coordinate space.

Control points are virtual and can only defined manually. These landmarks clearly define the tools pose only by using landmarks in the tool coordinate system. E.g., two landmarks for a 5DoF tool and three landmarks for a 6DoF tool. They may be used, e.g., for a point based registration of a tool from image space to tracking space. A typical set of three control points for a 6 DoF tool might be [1;0;0], [0;1;0], [0;0;1].

Tool landmarks are designed for representing defined landmarks on a tool. The number of these landmarks might exceed the number of control points for reasons of redundancy and averaging. They are used for, e.g., manually registering the pose of a tool by visual markers in a CT scan. If you would use these landmarks to do a point based registration from image space to tracking space later, you might overweight the tool because of two many landmarks compared to other markers. The tool landmarks can be calibrated manually or by using a second tracked pointer, move it to each landmark and press "Add Pointer Position".</p>
<p>Return to the overview of the IGT Tracking Plugin views: <a class="el" href="org_mitk_gui_qt_igttracking.html">The IGT Tracking Plugin</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="mitkigt.html">MITK-IGT</a></li><li class="navelem"><a class="el" href="org_mitk_gui_qt_igttracking.html">The IGT Tracking Plugin</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
